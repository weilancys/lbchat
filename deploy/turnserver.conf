# =============================================================================
# Coturn TURN Server Configuration - Production
# =============================================================================
# Generated for: weilancys.duckdns.org
# VPS IP: 172.104.109.125

# Network settings
listening-port=3478
tls-listening-port=5349

# Listen on all interfaces
listening-ip=0.0.0.0

# Use fingerprint in TURN messages
fingerprint

# Long-term credential mechanism
lt-cred-mech

# Realm - your domain
realm=weilancys.duckdns.org

# External IP - REQUIRED for VPS deployment
# This tells TURN server its public IP for clients behind NAT
external-ip=172.104.109.125

# Relay IP - allow relaying on the external IP
relay-ip=172.104.109.125

# Authentication - matches TURN_PASSWORD in .env
user=lbchat:TWu0opJLQj1yixvrAKUd9A==

# Logging
log-file=/var/log/turnserver.log
verbose

# Security
no-multicast-peers
no-cli

# Allow loopback for testing (same machine)
no-loopback-peers

# Performance
total-quota=100
bps-capacity=0
stale-nonce=600

# Min and max ports for relay
min-port=49152
max-port=65535

# Allow relaying to any IP (needed for WebRTC)
# Remove the restrictive allowed-peer-ip settings
